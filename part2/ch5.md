# 🎯 05장. 소프트웨어에서 표현되는 모델 
## 🎈 Entity
### 🍋 Entity 모델링
### 🍋 식별 연산의 설계


## 🎈 VALUE OBJECT (값 객체)

- 개념적 식별성을 갖지 않으면서 도메인의 서술적 측면을 나타내는 객체를 `Value Object`라고 한다.

- 기본 예제가 단순하긴 하지만, VO라고 해서 반드시 단순하지만은 않다.
- 어떤 VO는 다른 여러 객체를 조립한 것일 수도 있고, Entity를 참조할 수도 있다.
- 또한, VO는 여러 객체 간에 오가는 메시지의 매개변수로 전달되기도 한다.
- 일시적인 용도로 사용되기도 하고, Entity(그리고 다른 Value)의 속성으로 사용되기도 한다.

<aside>
💡 “주소”는 VALUE OBJECT인가요? 누가 묻는 거죠?
- 주소라는 개념이 어떤 맥락에서는 VO로, 어떤 맥락에서는 Entity로 사용되는 경우에 대해 설명한다.

</aside>

> 모델에 포함된 어떤 요소의 속성에만 관심이 있다면, 그것을 VO로 분류하라.
VO에서 해당 VO가 전하는 속성의 의미를 표현하게 하고, 관련 기능을 부여하라.
또한, VO는 불변적으로 다뤄라.
VO에는 아무런 식별성도 부여하지 말고, Entity를 유지하는 데 필요한 설계상의 복잡성을 피하라.
> 

- VO를 구성하는 속성은 개념적 완전성을 형성해야 한다.
- 예를 들어, 왼쪽 보다 오른쪽처럼 여러 속성들이 응집력 있게 하나의 완전한 개념적 완전성을 가진다면, 따로 VO로 빼는게 좋다.
    
    ![스크린샷 2024-03-24 오후 4.40.19.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/69d6232c-19e9-43f8-826e-50a307551605/8d83c725-5a34-4d15-98cb-a252869eb2bc/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-03-24_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.40.19.png)
    

### 🍋 VALUE OBJECT의 설계

- VO를 `복사`하거나 `공유`해서 사용할 수 있다. 이는 설계 단순화 또는 성능 최적화를 꾀할 수 있다.
- 왜냐하면, 여러 VO의 인스턴스 가운데 어느 것을 사용하는지는 중요하지 않기 때문이다. (반면, Entity의 경우는 식별성 때문에 중요하다?)
- 단, `공유`할 때, 해당 객체가 `불변적`이어야 한다.
- 복사와 공유 중 어느 것이 경제성 면에서 더 나은지는 구현 환경에 따라 달라진다.
- 복사의 경우, 객체의 개수가 굉장히 많아져 시스템이 무거워질 수도 있다.
- 반면, 공유의 경우 분산 시스템에서는 느려질 수 있다.
- 공유는 다음과 같은 경우에 가장 도움이 되고 문제가 적게 일어나므로, 다음의 경우로만 공유를 제한한다.
    1. 공간을 절약하거나 DB 내의 객체 수를 줄이는 것이 중요한 경우
    2. 통신 부하가 낮은 경우(예 : 중앙집중형 서버)
    3. 공유 객체의 불변성이 엄격하게 지켜지는 경우
- VO가 불변적이면, 변경관리는 단순해진다. 맘껏 공유할 수도 있고, 개발자들은 애플리케이션이 특정 객체의 인스턴스에 의존하지 않는다는 점을 토대로 순수하게 기술적인 근거에 따라 복사와 공유와 같은 문제에 관해 자유롭게 의사결정을 내릴 수 있다.

### 🍋 VALUE OBJECT를 포함한 연관관계 설계

- VO 간의 양방향 연관관계는 완전히 제거하도록 노력해야 한다.
    - 왜냐하면, 두 VO 간의 양방향 연관관계는 단순히 논리적으로 타당하지 않기 때문이다.
    - 즉, 어떤 객체가 식별성 없이 자신을 가리키는 동일한 VO를 역으로 가리키는 것은 아무런 의미가 없기 때문이다. 기껏해야 한 객체가 자신을 가리키고 있는 것과 내용이 같은 어떤 객체를 가리키고 있다는 것에 불과하다.
- 만약, 모델에 그와 같은 연관관계가 필요해 보여도, 그 객체를 VO로 선언하는 것은 한 번 더 고려해봐야 한다.
- 어쩌면, 그 객체에 아직도 분명하게 파악하지 못한 식별성이 남아 있을지도 모른다.

<aside>
💡 참고!
- 모델에 포함된 연관관계의 수가 더 적고, 연관관계가 단순할수록 더 나은 모델이라 할 수 있다.
- VO와 달리, Entity 간의 양방향 연관관계는 있을 수 있지만 유지하기는 어려울 수 있다.

</aside>

## 🎈 SERVICE(서비스)

### 🍋 SERVICE와 격리된 도메인 계층

### 🍋 구성 단위

### 🍋 SERVICE에 접근하기

## 🎈 MODULE(모듈, 패키지라고도 함)

### 🍋 기민한 MODULE

### 🍋 인프라스트럭처 주도 패키지화의 함정

## 🎈 모델링 패러다임

### 🍋 객체 패러다임이 지배적인 이유

### 🍋 객체 세계에서 객체가 아닌 것들

> 멀티모듈이 유행하는 이유 궁금함.
> 


## 패러다임이 혼재할 때 MODEL-DRIVEN DESIGN 고수하기
